
(* Next steps: connecting concrete_vs_symbolic to the equivalence checker.
   Equivalence between programs boils down to equivalence between starting states of those programs.
   Start both programs in the same initial state.
   Then run the two SMT interpreters to get two symbolic final states (one for each program).
   Then AliveInLean considers the formula: testing for equality of each of the state fields.
   TODO: For this, you need a first-order representation like lists or the one from CompCert,
   like the one based on Patricia tries because functions over infinite domains can not be
   converted into equality checking SMT queries.
   CompCert's map has some kind of functional extensionality for Patricia tries. *)

   Some more notes from Joe on f_equal for proving equality of records:

(* To prove f (e1 e2 e3) = f (e1' e2' e3'), it's enough to show e1 = e1', e2 = e2', e3 = e3'.*)
(* Record {|field1 := f1 ; field2 = f2 ; field3 = f3 ;|} is equivalent to mkRecord (f1 f2 f3)
  and so then you can apply f_equal. *)
(* Can use the same f_equal for pairs, tuples, lists, etc. 
     Any constructor of a type: f_equal is a good idea. *)